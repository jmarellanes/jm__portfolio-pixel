/* =====================================================================
  -> BUTTON
===================================================================== */
// BUTTON RESET
button {
  border: none;
  background-color: transparent;
  font-family: inherit;
  cursor: pointer;
  padding: 0;
}
// END RESET

.nav-main {
  --dimentions: 72px;
  --border-size: 2px;
  --button-inner: 62px;
  --button-outer: 10px;

  &__item {
    margin-right: 3px;
    box-shadow: -3px 0 0 0 var(--color__button--border),
      3px 0 0 0 var(--color__button--border),
      0 -3px 0 0 var(--color__button--border),
      0 3px 0 0 var(--color__button--border);
  }

  &__button {
    // Prevent detecting clicks on button child elements
    > * {
      pointer-events: none;
    }

    position: relative;
    z-index: 1;

    width: var(--dimentions);
    height: calc(var(--button-inner) + var(--button-outer));
    box-shadow: 0 5px 0 0 rgba(42, 13, 102, 0.6),
      0 7px 0 0 rgba(42, 13, 102, 0.3), 0 9px 0 0 rgba(42, 13, 102, 0.2);

    transition: all 250ms var(--easing__s);
    transition-property: height, box-shadow;

    &::after,
    &::before {
      content: '';
      position: absolute;
      z-index: -1;
      left: 0;

      width: inherit;
    }

    &::after {
      top: 0;

      height: var(--button-inner);
      background-color: var(--color__secd);
    }

    &::before {
      bottom: 0;

      height: var(--button-outer);
      background-color: var(--color__secd-shade--1);
    }

    &-pixel {
      &--top,
      &--bottom {
        &::before,
        &::after {
          @include jm__pseudo-element(3px, 3px);
          background-color: var(--color__secd-shade--1);
        }

        &::after {
          left: calc(100% - 3px);
        }
      }

      &--bottom {
        &::before,
        &::after {
          top: calc(100% - 13px);

          transition: top 150ms var(--easing__s);
        }
      }
    }

    &[aria-selected='true'] {
      --active-height: 56px;
      height: calc(var(--active-height) + var(--button-outer));
      transition: all 150ms var(--easing__s);

      .nav-main__button-pixel {
        &--bottom {
          &::before,
          &::after {
            top: calc(100% - 7px);
          }
        }
      }
    }

    --focus__shadow: 0 6px 0 0 var(--color__button--border),
      0 9px 0 0 var(--color__secd);
    // Fallback for Safari
    &:focus {
      outline: none;
      box-shadow: var(--focus__shadow);
    }

    // HACK for use @supports selector() with SASS
    @supports #{'\selector(*:focus-visible)'} {
      &:focus {
        outline: none;
      }

      &:focus-visible {
        outline: none;
        box-shadow: var(--focus__shadow);
      }
    }
  }
}
